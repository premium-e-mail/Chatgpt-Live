<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Email Case Variant Generator</title>
  <style>
    :root{--bg:#ffffff;--card:#f8f9fa;--accent:#2563eb;--muted:#444;--glass:#f1f5f9}
    html,body{height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui, -apple-system,Segoe UI, Roboto, "Helvetica Neue", Arial; margin:0; background:var(--bg); color:#000; display:flex; align-items:center; justify-content:center; padding:28px}
    .wrap{width:100%;max-width:980px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    h1{font-size:20px;margin:0;color:#000}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .card{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 6px 24px rgba(0,0,0,0.1)}
    form{display:grid;grid-template-columns:1fr 220px;gap:12px;align-items:center}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text], input[type=number], select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #ccc;background:#fff;color:#000;font-size:14px}
    .controls{display:flex;flex-direction:column;gap:8px}
    .row{display:flex;gap:8px}
    button{background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:8px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;border:1px solid #ccc;color:#000}
    .result{margin-top:14px}
    .list{max-height:320px;overflow:auto;padding:10px;border-radius:8px;border:1px solid #ccc;background:#fff}
    .item{display:flex;justify-content:space-between;align-items:center;padding:8px 6px;border-bottom:1px dashed #ddd}
    .item:last-child{border-bottom:0}
    .item .mail{font-family:monospace;margin-right:12px;color:#000}
    .actions{display:flex;gap:8px}
    small.hint{color:var(--muted)}
    .footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
    @media (max-width:720px){form{grid-template-columns:1fr;}
      .row{flex-direction:column}
      .actions{gap:6px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Email Case Variant Generator</h1>
        <p class="lead">দেয়া ইমেইল থেকে ছোট-বড় অক্ষরের (case) ভ্যারিয়েশন জেনারেট করে দেয় — সংখ্যাগুলো অপরিবর্তিত থাকবে।</p>
      </div>
    </header>

    <div class="card">
      <form id="genForm" onsubmit="return false">
        <div>
          <label for="email">Your mail</label>
          <input id="email" type="text" placeholder="e.g. mdnayon718@gmail.com" value="mdnayon718@gmail.com" required />
          <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
            <div style="flex:1">
              <label for="count">Mail generate amount</label>
              <input id="count" type="number" min="1" max="10000" value="15" />
            </div>
            <div style="width:160px">
              <label for="mode">Mode</label>
              <select id="mode">
                <option value="random">Random unique cases</option>
                <option value="all">All possible (exhaustive)</option>
              </select>
            </div>
          </div>
          <p style="margin:8px 0 0"><small class="hint">نوٹ: লোকাল-পর্টে থাকা সংখ্যাগুলো অপরিবর্তিত থাকবে — কেবল অক্ষরগুলোর ছোট/বড় পরিবর্তন হবে।</small></p>
        </div>

        <div class="controls">
          <label>&nbsp;</label>
          <div class="row">
            <button id="generate">Generate</button>
            <button id="copyAll" class="ghost" type="button">Copy All</button>
            <button id="downloadTxt" class="ghost" type="button">Download .txt</button>
            <button id="downloadXls" class="ghost" type="button">Download .xls</button>
            <button id="downloadCsv" class="ghost" type="button">Download .csv</button>
          </div>
          <div class="row">
            <button id="reset" class="ghost" type="button">Reset</button>
          </div>
        </div>
      </form>

      <div class="result">
        <label>Results</label>
        <div id="list" class="list"></div>
        <div class="footer">CREAT BY NAYON</div>
      </div>
    </div>
  </div>

  <script>
    function isAlpha(ch){return /[A-Za-z]/.test(ch)}
    function getLocalDomain(email){
      const at = email.indexOf('@');
      if(at===-1) return [email,''];
      return [email.slice(0,at), email.slice(at+1)];
    }

    function countAlpha(str){return Array.from(str).filter(isAlpha).length}

    function generateAllCases(local){
      const chars = Array.from(local);
      const alphaIdx = [];
      for(let i=0;i<chars.length;i++) if(isAlpha(chars[i])) alphaIdx.push(i);
      const n = alphaIdx.length;
      if(n>20){
        throw new Error('Too many alphabetic characters ('+n+'). Exhaustive mode limited to 20 letters.');
      }
      const total = 1<<n;
      const out = [];
      for(let mask=0; mask<total; mask++){
        const copy = chars.slice();
        for(let j=0;j<n;j++){
          const idx = alphaIdx[j];
          const ch = chars[idx];
          copy[idx] = ((mask>>j)&1)? ch.toUpperCase(): ch.toLowerCase();
        }
        out.push(copy.join(''));
      }
      return out;
    }

    function generateRandomCases(local, count){
      const chars = Array.from(local);
      const alphaIdx = [];
      for(let i=0;i<chars.length;i++) if(isAlpha(chars[i])) alphaIdx.push(i);
      const n = alphaIdx.length;
      if(n===0) return [local];
      const maxUnique = Math.pow(2,n);
      const needed = Math.min(count, maxUnique);
      const set = new Set();
      if(needed===maxUnique){
        return generateAllCases(local).slice(0,needed);
      }
      while(set.size<needed){
        let s = chars.slice();
        for(let i of alphaIdx){
          if(Math.random()>.5) s[i] = s[i].toUpperCase(); else s[i] = s[i].toLowerCase();
        }
        set.add(s.join(''));
        if(set.size>100000) break;
      }
      return Array.from(set);
    }

    function sanitizeEmailInput(v){return v.trim();}

    const emailInput = document.getElementById('email');
    const countInput = document.getElementById('count');
    const generateBtn = document.getElementById('generate');
    const listEl = document.getElementById('list');
    const copyAllBtn = document.getElementById('copyAll');
    const downloadTxtBtn = document.getElementById('downloadTxt');
    const downloadXlsBtn = document.getElementById('downloadXls');
    const downloadCsvBtn = document.getElementById('downloadCsv');
    const resetBtn = document.getElementById('reset');
    const modeSelect = document.getElementById('mode');

    function renderList(items, domain){
      listEl.innerHTML = '';
      items.forEach((loc)=>{
        const wrap = document.createElement('div');
        wrap.className = 'item';
        const left = document.createElement('div');
        left.className = 'mail';
        left.textContent = loc + (domain?('@'+domain):'');
        const actions = document.createElement('div');
        actions.className = 'actions';
        const copy = document.createElement('button'); copy.textContent='Copy'; copy.className='ghost';
        copy.addEventListener('click',()=>{navigator.clipboard.writeText(left.textContent).then(()=>{copy.textContent='Copied'; setTimeout(()=>copy.textContent='Copy',900)})});
        actions.appendChild(copy);
        wrap.appendChild(left);
        wrap.appendChild(actions);
        listEl.appendChild(wrap);
      });
    }

    generateBtn.addEventListener('click',()=>{
      const raw = sanitizeEmailInput(emailInput.value);
      if(!raw){alert('Please enter an email'); return}
      const [local, domain] = getLocalDomain(raw);
      if(local.length===0){alert('Invalid email (no local part)'); return}
      const count = parseInt(countInput.value,10) || 1;
      const mode = modeSelect.value;
      try{
        let variants = (mode==='all')? generateAllCases(local) : generateRandomCases(local, count);
        if(mode==='random' && variants.length < count){
          const more = generateAllCases(local).slice(0,count);
          variants = Array.from(new Set(variants.concat(more))).slice(0,count);
        }
        const out = variants.slice(0,count);
        renderList(out, domain);
      }catch(err){
        alert('Error: '+err.message);
      }
    });

    copyAllBtn.addEventListener('click',()=>{
      const nodes = Array.from(listEl.querySelectorAll('.mail')).map(n=>n.textContent);
      if(nodes.length===0){alert('Nothing to copy'); return}
      const txt = nodes.join('\n');
      navigator.clipboard.writeText(txt).then(()=>{copyAllBtn.textContent='Copied'; setTimeout(()=>copyAllBtn.textContent='Copy All',1000)})
    });

    function downloadFile(ext, mime){
      const nodes = Array.from(listEl.querySelectorAll('.mail')).map(n=>n.textContent);
      if(nodes.length===0){alert('Nothing to download'); return}
      let content = nodes.join('\n');
      const blob = new Blob([content], {type:mime});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'emails.'+ext; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    downloadTxtBtn.addEventListener('click',()=>downloadFile('txt','text/plain;charset=utf-8'));
    downloadXlsBtn.addEventListener('click',()=>downloadFile('xls','application/vnd.ms-excel'));
    downloadCsvBtn.addEventListener('click',()=>downloadFile('csv','text/csv;charset=utf-8'));

    resetBtn.addEventListener('click',()=>{emailInput.value=''; countInput.value=15; listEl.innerHTML='';});
  </script>
</body>
</html>
